{% extends 'CantigaCoreBundle:layout:base-layout.html.twig' %}

{% block page_title %}
	{{ 'Discussion forums' | trans([], 'pages') }}
{% endblock %}

{% block page_subtitle %}
	{{ '{} new posts since last visit' | trans([0], 'forum') }}
{% endblock %}

{% block page_content %}
<div class="row">
	<div class="forum-title">
		<h4>{{ forum.name }}</h4>
	</div>
	{% if forum.forums %}
	<div class="forum-list">
		<div class="forum-nav">
			<ul class="cnav">
				<li class="dropdown">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
						{{ 'Show' | trans([], 'general') }} <span class="caret"></span>
					</a>
					<ul class="dropdown-menu pull-right">
						<li role="presentation"><a role="menuitem" href="#">{{ 'Observed topics' | trans([], 'forum') }}</a></li>
						<li role="presentation"><a role="menuitem" href="#">{{ 'Recent topics' | trans([], 'forum') }}</a></li>
						<li role="presentation"><a role="menuitem" href="#">{{ 'Recent posts' | trans([], 'forum') }}</a></li>
					</ul>
				</li>
				<li class="header"><i class="fa fa-th"></i> {{ 'Sub-forums: 0' | trans([forum.name], 'forum') }}</li>
			</ul>
			<table class="table table-hover table-striped table-forum-list">
				<thead>
					<tr>
						<th width="30"></th>
						<th>Forum</th>
						<th width="100" class="forum-numeric">Topics</th>
						<th width="100" class="forum-numeric">Replies</th>
						<th width="250">Last post</th>
					</tr>
				</thead>
				<tbody>
				{% for subforum in forum.forums %}
					<tr>
						<td><span class="forum-activity fa fa-circle"></span></td>
						<td>
							<a href="{{ spath('project_forum_viewforum', {'id': subforum.id}) }}" class="forum-title">{{ subforum.name }}</a>
							<span class="forum-desc">{{ subforum.description }}</span>
						</td>
						<td class="forum-numeric">{{ subforum.topicNum }}</td>
						<td class="forum-numeric">{{ subforum.postNum }}</td>
						<td>
							<span class="forum-lastpost"><a href="#">Sample topic</a> by <a href="#">peanockio</a> <a href="#" class="fa fa-arrow-right"></a></span>
							<span class="forum-lastpost-when">1 day ago</span>
						</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	{% endif %}
	<div class="topic-list">
		{% if forum.announcements %}
		<div class="forum-nav">
			<table class="table table-hover table-striped table-topic-list">
				<thead>
					<tr>
						<th width="30"></th>
						<th>Announcements</th>
						<th width="100" class="topic-numeric">Replies</th>
						<th width="100" class="topic-numeric">Views</th>
						<th width="250">Last post</th>
					</tr>
				</thead>
				<tbody>
					{% for announcement in forum.announcements %}
					<tr>
						<td><span class="fa fa-circle"></span></td>
						<td>
							<span class="topic"><a href="{{ spath('project_forum_viewtopic') }}" class="an">{{ announcement.title }}</a> 
								{% if announcement.closed %}
								<span class="fa fa-lock"></span>
								{% endif %}
							</span>
							<span class="topic-author-note">author: <a href="#">{{ announcement.author.name }}</a>, {{ ago(announcement.author.postTime) }}</span>
						</td>
						<td class="topic-numeric">{{ announcement.replyNum }}</td>
						<td class="topic-numeric">{{ announcement.viewNum }}</td>
						<td>
							<span class="topic-lastpost-author">author: <a href="#">{{ announcement.lastPoster.name }}</a> <a href="#" class="fa fa-arrow-right"></a></span>
							<span class="topic-lastpost-when">{{ ago(announcement.lastPoster.postTime) }}</span>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% endif %}
		{% if forum.topics %}
		<div class="forum-nav">
			<table class="table table-hover table-striped table-topic-list">
				<thead>
					<tr>
						<th width="30"></th>
						<th>Topics</th>
						<th width="100" class="topic-numeric">Replies</th>
						<th width="100" class="topic-numeric">Views</th>
						<th width="250">Last post</th>
					</tr>
				</thead>
				<tbody>
					{% for topic in forum.topics %}
					<tr>
						<td><span class="fa fa-circle"></span></td>
						<td>
							<span class="topic"><a href="{{ spath('project_forum_viewtopic') }}" class="an">{{ topic.title }}</a> 
								{% if topic.closed %}
								<span class="fa fa-lock"></span>
								{% endif %}
							</span>
							<span class="topic-author-note">author: <a href="#">{{ topic.author.name }}</a>, {{ ago(topic.author.postTime) }}</span>
						</td>
						<td class="topic-numeric">{{ topic.replyNum }}</td>
						<td class="topic-numeric">{{ topic.viewNum }}</td>
						<td>
							<span class="topic-lastpost-author">author: <a href="#">{{ topic.lastPoster.name }}</a> <a href="#" class="fa fa-arrow-right"></a></span>
							<span class="topic-lastpost-when">{{ ago(topic.lastPoster.postTime) }}</span>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% else %}
		<div class="forum-nav">
			<p>There are no topics in this forum.</p>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}
